import{j as a,V as h,c as p,T as m,r,a as T,g as k,S as w,b as U,u as B,d as E,B as I,e as N,f as F,h as P,i as R,P as $}from"./index-D2vdpfZE.js";const D="_Toast_conqy_1",W="_success_conqy_8",M="_danger_conqy_12",V="_warning_conqy_16",b={Toast:D,success:W,danger:M,warning:V},K=s=>{const{className:t,message:n,title:c="Success",variant:e="success"}=s,o=[t,b[e]];return a.jsxs(h,{className:p(b.Toast,{},o),align:"center",justify:"center",gap:8,children:[a.jsx(m,{size:"m",title:c}),a.jsx(m,{size:"m",text:n})]})},O="_AlertList_1cza3_1",Y={AlertList:O};function G(){const[s,t]=r.useState([]),n=e=>{t([...s,e]),setTimeout(()=>{t(o=>o.slice(1))},4e3)};return{alerts:a.jsx("div",{className:Y.AlertList,children:s.map((e,o)=>a.jsx(K,{title:e.title,message:e.message,variant:e.variant},o))}),createToast:n}}const H=T("auth/loginByUsername",async(s,t)=>{const{dispatch:n,rejectWithValue:c}=t;try{const e=await n(k(s)).unwrap();return e?(w.setItem(U.USER_ID_KEY,e.id),n(B.setAuthData(e)),e):c("The user was not found.")}catch{return c("Something went wrong, try again later")}}),J=s=>{if(s!=null)return s instanceof Error||typeof(s==null?void 0:s.message)=="string"?s.message:typeof(s==null?void 0:s.error)=="string"?s.error:s.data===null?"Something went wrong, try again later":s!=null&&s.data?s.data:typeof s=="string"?s:String(s)},Q=()=>{const s=E(),[t,n]=r.useState(""),{alerts:c,createToast:e}=G(),o=r.useCallback(i=>{e({title:"Danger",variant:"danger",message:i})},[e]),l=r.useCallback(async()=>{const i=await s(H(t));if(n(""),i.meta.requestStatus==="rejected"){const f=J(i.payload);o(f)}},[o,s,t]),_=r.useCallback(i=>{n(i.trim())},[]),d=r.useCallback(()=>t.trim()!=="",[t]);return{username:t,onLoginClick:l,onChangeUsername:_,isLoginButtonActive:d,alerts:c}},X={s:"size_s",m:"size_m",l:"size_l"},Z={5:"border_5",10:"border_10",15:"border_15",20:"border_20"},ss="_InputWrapper_1jqcu_1",es="_size_s_1jqcu_9",ts="_size_m_1jqcu_13",ns="_size_l_1jqcu_17",as="_border_5_1jqcu_21",cs="_border_10_1jqcu_25",os="_border_15_1jqcu_29",rs="_border_20_1jqcu_33",is="_focused_1jqcu_37",us="_input_1jqcu_41",ls="_readonly_1jqcu_52",u={InputWrapper:ss,size_s:es,size_m:ts,size_l:ns,border_5:as,border_10:cs,border_15:os,border_20:rs,focused:is,input:us,readonly:ls},_s=r.memo(s=>{const{className:t,value:n,onChange:c,type:e="text",placeholder:o,autofocus:l,readonly:_,label:d,size:i="m",borderRadius:f="10",...z}=s,y=r.useRef(null),[L,j]=r.useState(!1);r.useEffect(()=>{var g;l&&(j(!0),(g=y.current)==null||g.focus())},[l]);const S=g=>{c==null||c(g.target.value)},v=()=>{j(!1)},A=()=>{j(!0)},q={[u.readonly]:_,[u.focused]:L},C=[t,u[X[i]],u[Z[f]]],x=a.jsx("div",{className:p(u.InputWrapper,q,C),children:a.jsx("input",{ref:y,type:e,value:n,onChange:S,className:u.input,onFocus:A,onBlur:v,readOnly:_,placeholder:o,...z})});return d?a.jsxs(h,{max:!0,gap:8,children:[a.jsx(m,{text:d}),x]}):x}),ds="_LoginForm_11srx_1",gs={LoginForm:ds},ms=r.memo(({className:s})=>{const{username:t,onLoginClick:n,onChangeUsername:c,isLoginButtonActive:e,alerts:o}=Q();return a.jsxs(h,{className:p(gs.LoginForm,{},[s]),max:!0,align:"center",justify:"center",gap:32,children:[a.jsx(m,{bold:!0,size:"l",title:"Sign In"}),a.jsx(_s,{autoFocus:!0,type:"text",placeholder:"Username",onChange:c,value:t}),a.jsx(I,{variant:"primaryInverted",size:"l",disabled:!e(),onClick:n,children:"Send"}),o]})}),ps="_LoginPage_okk6s_1",fs={LoginPage:ps},hs=({className:s})=>{const t=N(),n=F(P);return r.useEffect(()=>{n&&t(R())},[t,n]),a.jsx($,{className:p(fs.LoginPage,{},[s]),children:a.jsx(ms,{})})};export{hs as default};
